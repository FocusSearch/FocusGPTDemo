(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[1],{

/***/ "../src-v5/assets/js/charts.components/TitleComponent.js":
/*!***************************************************************!*\
  !*** ../src-v5/assets/js/charts.components/TitleComponent.js ***!
  \***************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _pc_assets_js_d3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @pc/assets/js/d3.js */ \"../src-v5/assets/js/d3.js\");\n/* harmony import */ var _pc_assets_js_charts_components_CommonComponent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @pc/assets/js/charts.components/CommonComponent */ \"../src-v5/assets/js/charts.components/CommonComponent.js\");\n/* harmony import */ var _d3v7Export__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../d3v7Export */ \"../src-v5/assets/js/d3v7Export.js\");\n// 画轴的标题\n\n// 通用组件[ 获取字符串长度... ]\n\n\nlet TitleComponent = {\n  /**\r\n   * 画数值轴的标题\r\n   * @param options\r\n   *          {\r\n   *              svgContainer    -   画图SVG的DOM元素\r\n   *              direction       -   轴标题的方向，vertical: 垂直旋转 / horizontal: 水平\r\n   *              titleText       -   标题的内容\r\n   *              titleFontSize   -   标题的字体大小\r\n   *\r\n   *              translateTop    -   顶部偏移\r\n   *              translateLeft   -   左侧偏移\r\n   *              titleHeight     -   标题内容区域的高度\r\n   *              titleWidth      -   标题内容区域的宽度\r\n   *          }\r\n   * */\n  drawAxisTitle: function (options) {\n    options = options || {};\n    if (!options.svgContainer || !options.titleText || !options.titleHeight || !options.titleWidth) return false;\n    let theSvgContainer = options.svgContainer,\n      direction = options.direction || 'vertical',\n      titleFontSize = parseInt(options.titleFontSize) || 13,\n      titleAlignment = options.titleAlignment || 'center',\n      titleFontColor = options.titleFontColor,\n      titleFontBold = options.titleFontBold === undefined ? 'inherit' : options.titleFontBold ? 'bold' : '500',\n      titleFontItalic = options.titleFontItalic === undefined ? 'inherit' : options.titleFontItalic ? 'italic' : 'normal',\n      clickFlag = !!(options.titleAxisList && options.titleAxisList.length);\n    const svgDom = _d3v7Export__WEBPACK_IMPORTED_MODULE_2__[\"default\"].select(theSvgContainer);\n    switch (direction) {\n      case \"horizontal\":\n        // 画垂直方向的标题\n        const theHorizontalTitleContainer = _pc_assets_js_charts_components_CommonComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].reuseElement({\n          container: svgDom,\n          selector: `.title.horizontal-title.${options.horizontalTitleClass}`,\n          elementCreator: () => svgDom.append('g').attr('class', `title horizontal-title ${options.horizontalTitleClass}`)\n        }).style(\"font-size\", titleFontSize + 'px').style(\"fill\", titleFontColor || 'inherit').style(\"font-weight\", titleFontBold).style(\"font-style\", titleFontItalic).on(\"mousedown\", function () {\n          let event = _pc_assets_js_d3_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].event;\n          _DataFocusMethod.stopEventDefault(event);\n        });\n\n        // 标题整体区域背景板\n        const titleRect = _pc_assets_js_charts_components_CommonComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].reuseElement({\n          container: theHorizontalTitleContainer,\n          selector: 'rect',\n          elementCreator: () => theHorizontalTitleContainer.append('rect')\n        }).attr(\"width\", options.titleWidth + 'px').attr(\"height\", options.titleHeight + 'px').style(\"fill\", \"none\").style(\"stroke-width\", \"0\").style(\"stroke\", \"none\");\n        let theHTitleSize = _pc_assets_js_charts_components_CommonComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getStrSizeByCanvas('string', options.titleText, {\n            fontSize: titleFontSize\n          }),\n          theHMaxStrWidth = Math.min(options.titleWidth - 20, theHTitleSize.width);\n        const existedTextContainer = theHorizontalTitleContainer.select('.title-dom-container.horizontal-title-dom');\n        const theHTextContainer = _pc_assets_js_charts_components_CommonComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].reuseElement({\n          container: theHorizontalTitleContainer,\n          selector: '.title-dom-container.horizontal-title-dom',\n          elementCreator: () => theHorizontalTitleContainer.append('g').attr('class', 'title-dom-container horizontal-title-dom')\n        });\n        theHTextContainer.classed('cursor-pointer', clickFlag).attr(\"transform\", \"translate(0,0)\").attr(\"click-flag\", clickFlag).attr(\"click-idx-list\", function () {\n          let idx = [];\n          options.titleAxisList && options.titleAxisList.forEach(function (axis, index) {\n            idx.push(axis.idx);\n          });\n          return idx.join(\",\");\n        });\n        const textDom = _pc_assets_js_charts_components_CommonComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].reuseElement({\n          container: theHTextContainer,\n          selector: 'text',\n          elementCreator: theHTextContainer.append('text')\n        }).style(\"width\", options.titleWidth + 'px').style(\"height\", options.titleHeight + 'px').attr(\"dominant-baseline\", 'central').attr(\"x\", titleAlignment === 'center' ? options.titleWidth / 2 - theHMaxStrWidth / 2 : titleAlignment === 'left' ? 5 : options.titleWidth - theHMaxStrWidth - 18).attr(\"y\", theHTitleSize.height / 2).text(function () {\n          // 如果字符串需要裁剪\n          if (theHMaxStrWidth < theHTitleSize.width) {\n            let dText = options.titleText,\n              theSubText = '';\n            for (let i = 0; i < dText.length; i++) {\n              let chart = dText.charAt(i);\n              theSubText += chart;\n              let theSubTextSize = _pc_assets_js_charts_components_CommonComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getStrSizeByCanvas('string', theSubText + '..', {\n                fontSize: titleFontSize\n              });\n              if (theSubTextSize.width > theMaxStrWidth - titleFontSize) {\n                break;\n              }\n            }\n            if (theSubText.length === dText.length) {\n              return dText;\n            } else {\n              return theSubText + '..';\n            }\n          }\n          return options.titleText;\n        }).append(\"title\").text(options.titleText);\n        if (options.titleAxisList && options.titleAxisList.length) {\n          const pathDom = _pc_assets_js_charts_components_CommonComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].reuseElement({\n            container: theHTextContainer,\n            selector: 'path',\n            elementCreator: () => theHTextContainer.append('path')\n          }).attr(\"transform\", \"translate(\" + (titleAlignment === 'center' ? options.titleWidth / 2 + theHMaxStrWidth / 2 + 3 : titleAlignment === 'left' ? 8 + theHMaxStrWidth : options.titleWidth - 15) + \" ,\" + theHTitleSize.height / 3 + \")\").attr(\"d\", \"M0 0,5 6,10 0Z\");\n        }\n        theHorizontalTitleContainer.attr(\"transform\", \"translate(\" + options.translateLeft + \" , \" + options.translateTop + \")\");\n        return {\n          titleContainer: theHorizontalTitleContainer\n        };\n        break;\n      case \"vertical\":\n        // 画垂直方向的标题\n        const theVerticalTitleContainer = _pc_assets_js_charts_components_CommonComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].reuseElement({\n          container: svgDom,\n          selector: `g.title.vertical-title.${options.verticalTitleClass}`,\n          elementCreator: () => svgDom.append('g').attr('class', `title vertical-title ${options.verticalTitleClass}`)\n        }).style(\"font-size\", titleFontSize + 'px').style(\"fill\", titleFontColor || 'inherit').style(\"font-weight\", titleFontBold).style(\"font-style\", titleFontItalic).on(\"mousedown\", function () {\n          let event = _pc_assets_js_d3_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].event;\n          _DataFocusMethod.stopEventDefault(event);\n        });\n        _pc_assets_js_charts_components_CommonComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].reuseElement({\n          container: theVerticalTitleContainer,\n          selector: 'rect',\n          elementCreator: () => theVerticalTitleContainer.append('rect')\n        }).attr(\"width\", options.titleWidth + 'px').attr(\"height\", options.titleHeight + 'px').style(\"fill\", \"none\").style(\"stroke-width\", \"0\").style(\"stroke\", \"none\");\n        let theTitleSize = _pc_assets_js_charts_components_CommonComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getStrSizeByCanvas('string', options.titleText, {\n            fontSize: titleFontSize\n          }),\n          theMaxStrWidth = Math.min(options.titleHeight - 20, theTitleSize.width);\n        const theTextContainer = _pc_assets_js_charts_components_CommonComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].reuseElement({\n          container: theVerticalTitleContainer,\n          selector: 'g.title-dom-container.vertical-title-dom',\n          elementCreator: () => theVerticalTitleContainer.append('g').attr('class', 'title-dom-container vertical-title-dom')\n        }).classed(\"cursor-pointer\", clickFlag).attr(\"transform\", \"translate(0,0) rotate(-90)\").attr(\"click-flag\", clickFlag).attr(\"click-idx-list\", function () {\n          let idx = [];\n          options.titleAxisList && options.titleAxisList.forEach(function (axis, index) {\n            idx.push(axis.idx);\n          });\n          return idx.join(\",\");\n        });\n        _pc_assets_js_charts_components_CommonComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].reuseElement({\n          container: theTextContainer,\n          selector: 'text',\n          elementCreator: () => theTextContainer.append('text')\n        }).style(\"width\", options.titleWidth + 'px').style(\"height\", options.titleHeight + 'px').attr(\"dominant-baseline\", 'central').attr(\"x\", titleAlignment === 'center' ? -(options.titleHeight - theMaxStrWidth) / 2 - theMaxStrWidth : titleAlignment === 'left' ? -theMaxStrWidth - 8 : -options.titleHeight + 3).attr(\"y\", theTitleSize.height / 2).text(function () {\n          // 如果字符串需要裁剪\n          if (theMaxStrWidth < theTitleSize.width - 20) {\n            let dText = options.titleText,\n              theSubText = '';\n            for (let i = 0; i < dText.length; i++) {\n              let chart = dText.charAt(i);\n              theSubText += chart;\n              let theSubTextSize = _pc_assets_js_charts_components_CommonComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getStrSizeByCanvas('string', theSubText + '..', {\n                fontSize: titleFontSize\n              });\n              if (theSubTextSize.width - 20 > theMaxStrWidth - titleFontSize) {\n                break;\n              }\n            }\n            if (theSubText.length === dText.length) {\n              return dText;\n            } else {\n              return theSubText + '..';\n            }\n          }\n          return options.titleText;\n        }).append(\"title\").text(options.titleText);\n        if (options.titleAxisList && options.titleAxisList.length) {\n          _pc_assets_js_charts_components_CommonComponent__WEBPACK_IMPORTED_MODULE_1__[\"default\"].reuseElement({\n            container: theTextContainer,\n            selector: 'path',\n            elementCreator: () => theTextContainer.append('path')\n          }).attr(\"transform\", \"translate(\" + (titleAlignment === 'center' ? -(options.titleHeight - theMaxStrWidth) / 2 + 3 : titleAlignment === 'left' ? -3 : -options.titleHeight + theMaxStrWidth + 8) + \" ,\" + theTitleSize.height / 3 + \")\").attr(\"d\", \"M0 0,5 6,10 0Z\");\n        }\n        theVerticalTitleContainer.attr(\"transform\", \"translate(\" + options.translateLeft + \" , \" + options.translateTop + \")\");\n        return {\n          titleContainer: theVerticalTitleContainer\n        };\n        break;\n    }\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (TitleComponent);\n\n//# sourceURL=webpack:///../src-v5/assets/js/charts.components/TitleComponent.js?");

/***/ })

}]);